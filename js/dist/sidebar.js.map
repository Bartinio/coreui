{"version":3,"sources":["../src/sidebar.js"],"names":["$","PerfectScrollbar","getStyle","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","Default","transition","ClassName","ACTIVE","NAV_DROPDOWN_TOGGLE","OPEN","Event","CLICK","DESTROY","INIT","LOAD_DATA_API","TOGGLE","UPDATE","Selector","BODY","NAV_DROPDOWN_ITEMS","NAV_ITEM","NAV_LINK","NAV_LINK_QUERIED","NAVIGATION_CONTAINER","NAVIGATION","SIDEBAR","Sidebar","element","_element","mobile","ps","perfectScrollbar","setActiveLink","_breakpointTest","bind","_clickOutListener","_addEventListeners","_addMediaQuery","event","classList","document","body","contains","SIDEBAR_MINIMIZED","makeScrollbar","destroyScrollbar","setTimeout","container","querySelector","suppressScrollX","isRtl","destroy","find","each","key","value","link","cUrl","String","window","location","split","substr","length","slice","href","addClass","parents","add","parent","sm","smVal","parseInt","mediaQueryList","matchMedia","addListener","e","Boolean","matches","_toggleClickOut","target","preventDefault","stopPropagation","_removeClickOut","remove","_addClickOut","addEventListener","removeEventListener","on","dropdown","toggleClass","_jQueryInterface","$element","data","sidebar","call","Constructor","noConflict"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.0.0-next): sidebar.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport PerfectScrollbar from 'perfect-scrollbar'\nimport getStyle from './utilities/get-style'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'sidebar'\nconst VERSION             = '3.0.0'\nconst DATA_KEY            = 'coreui.sidebar'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst Default = {\n  transition : 400\n}\n\nconst ClassName = {\n  ACTIVE              : 'active',\n  NAV_DROPDOWN_TOGGLE : 'nav-dropdown-toggle',\n  OPEN                : 'open'\n}\n\nconst Event = {\n  CLICK         : 'click',\n  DESTROY       : 'destroy',\n  INIT          : 'init',\n  LOAD_DATA_API : `load${EVENT_KEY}${DATA_API_KEY}`,\n  TOGGLE        : 'toggle',\n  UPDATE        : 'update'\n}\n\nconst Selector = {\n  BODY                 : 'body',\n  NAV_DROPDOWN_TOGGLE  : '.nav-dropdown-toggle',\n  NAV_DROPDOWN_ITEMS   : '.nav-dropdown-items',\n  NAV_ITEM             : '.nav-item',\n  NAV_LINK             : '.nav-link',\n  NAV_LINK_QUERIED     : '.nav-link-queried',\n  NAVIGATION_CONTAINER : '.c-sidebar-nav, .sidebar-nav',\n  NAVIGATION           : '.c-sidebar-nav > .nav, .sidebar-nav > .nav',\n  SIDEBAR              : '.c-sidebar, .sidebar'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Sidebar {\n  constructor(element) {\n    this._element = element\n    this.mobile = false\n    this.ps = null\n    this.perfectScrollbar(Event.INIT)\n    this.setActiveLink()\n    this._breakpointTest = this._breakpointTest.bind(this)\n    this._clickOutListener = this._clickOutListener.bind(this)\n    this._addEventListeners()\n    this._addMediaQuery()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  perfectScrollbar(event) {\n    if (typeof PerfectScrollbar !== 'undefined') {\n      const classList = document.body.classList\n      if (event === Event.INIT && !classList.contains(ClassName.SIDEBAR_MINIMIZED)) {\n        this.ps = this.makeScrollbar()\n      }\n\n      if (event === Event.DESTROY) {\n        this.destroyScrollbar()\n      }\n\n      if (event === Event.TOGGLE) {\n        if (classList.contains(ClassName.SIDEBAR_MINIMIZED)) {\n          this.destroyScrollbar()\n        } else {\n          this.destroyScrollbar()\n          this.ps = this.makeScrollbar()\n        }\n      }\n\n      if (event === Event.UPDATE && !classList.contains(ClassName.SIDEBAR_MINIMIZED)) {\n        // ToDo: Add smooth transition\n        setTimeout(() => {\n          this.destroyScrollbar()\n          this.ps = this.makeScrollbar()\n        }, Default.transition)\n      }\n    }\n  }\n\n  makeScrollbar(container = Selector.NAVIGATION_CONTAINER) {\n    const ps = new PerfectScrollbar(document.querySelector(container), {\n      suppressScrollX: true\n    })\n    // ToDo: find real fix for ps rtl\n    ps.isRtl = false\n    return ps\n  }\n\n  destroyScrollbar() {\n    if (this.ps) {\n      this.ps.destroy()\n      this.ps = null\n    }\n  }\n\n  setActiveLink() {\n    $(Selector.NAVIGATION).find(Selector.NAV_LINK).each((key, value) => {\n      let link = value\n      let cUrl\n\n      if (link.classList.contains(Selector.NAV_LINK_QUERIED)) {\n        cUrl = String(window.location)\n      } else {\n        cUrl = String(window.location).split('?')[0]\n      }\n\n      if (cUrl.substr(cUrl.length - 1) === '#') {\n        cUrl = cUrl.slice(0, -1)\n      }\n      if ($($(link))[0].href === cUrl) {\n        $(link).addClass(ClassName.ACTIVE).parents(Selector.NAV_DROPDOWN_ITEMS).add(link).each((key, value) => {\n          link = value\n          $(link).parent().addClass(ClassName.OPEN)\n        })\n      }\n    })\n  }\n\n  // Private\n\n  _addMediaQuery() {\n    const sm = getStyle('--breakpoint-sm')\n    if (!sm) {\n      return\n    }\n    const smVal = parseInt(sm, 10) - 1\n    const mediaQueryList = window.matchMedia(`(max-width: ${smVal}px)`)\n\n    this._breakpointTest(mediaQueryList)\n\n    mediaQueryList.addListener(this._breakpointTest)\n  }\n\n  _breakpointTest(e) {\n    this.mobile = Boolean(e.matches)\n    this._toggleClickOut()\n  }\n\n  _clickOutListener(event) {\n    if (!this._element.contains(event.target)) { // or use: event.target.closest(Selector.SIDEBAR) === null\n      event.preventDefault()\n      event.stopPropagation()\n      this._removeClickOut()\n      document.body.classList.remove('sidebar-show')\n    }\n  }\n\n  _addClickOut() {\n    document.addEventListener(Event.CLICK, this._clickOutListener, true)\n  }\n\n  _removeClickOut() {\n    document.removeEventListener(Event.CLICK, this._clickOutListener, true)\n  }\n\n  _toggleClickOut() {\n    if (this.mobile && document.body.classList.contains('sidebar-show')) {\n      document.body.classList.remove('aside-menu-show')\n      this._addClickOut()\n    } else {\n      this._removeClickOut()\n    }\n  }\n\n  _addEventListeners() {\n\n    $(document).on(Event.CLICK, Selector.NAV_DROPDOWN_TOGGLE, (event) => {\n      event.preventDefault()\n      event.stopPropagation()\n      const dropdown = event.target\n      $(dropdown).parent().toggleClass(ClassName.OPEN)\n      this.perfectScrollbar(Event.UPDATE)\n    })\n\n    $(`${Selector.NAVIGATION} > ${Selector.NAV_ITEM} ${Selector.NAV_LINK}:not(${Selector.NAV_DROPDOWN_TOGGLE})`).on(Event.CLICK, () => {\n      this._removeClickOut()\n      document.body.classList.remove('sidebar-show')\n    })\n  }\n\n  // Static\n\n  static _jQueryInterface() {\n    return this.each(function () {\n      const $element = $(this)\n      let data = $element.data(DATA_KEY)\n\n      if (!data) {\n        data = new Sidebar(this)\n        $element.data(DATA_KEY, data)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  const sidebar = $(Selector.SIDEBAR)\n  Sidebar._jQueryInterface.call(sidebar)\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Sidebar._jQueryInterface\n$.fn[NAME].Constructor = Sidebar\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Sidebar._jQueryInterface\n}\n\nexport default Sidebar\n"],"file":"sidebar.js"}