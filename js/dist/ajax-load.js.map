{"version":3,"sources":["../src/ajax-load.js"],"names":["AjaxLoad","$","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","DEFAULT_PAGE","SUBPAGES_DIRECTORY","PAGE_404","MAIN_CONTENT","PAGE_LOAD_TRANSITION_SPEED","element","_element","url","location","hash","replace","setUpUrl","_addEventListeners","loadPage","ajax","type","dataType","cache","async","beforeSend","css","opacity","success","Pace","restart","animate","scrollTop","load","response","status","xhr","window","delay","error","href","removeClass","split","addClass","document","on","event","thisNav","parent","hasClass","preventDefault","attr","target","currentTarget","open","SetUpUrl"],"mappings":"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","sourcesContent":["import $ from 'jquery'\n\n/**\n * --------------------------------------------------------------------------\n * CoreUI (v2.0.0-alpha.1): ajax-load.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\n\nconst AjaxLoad = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                       = 'ajaxload'\n  const VERSION                    = '2.0.0-alpha.1'\n  const DATA_KEY                   = 'coreui.ajaxload'\n  const EVENT_KEY                  = `.${DATA_KEY}`\n  const DATA_API_KEY               = '.data-api'\n  const JQUERY_NO_CONFLICT         = $.fn[NAME]\n  const DEFAULT_PAGE               = 'main.html'\n  const SUBPAGES_DIRECTORY         = 'views/'\n  const PAGE_404                   = '404.html'\n  const MAIN_CONTENT               = '#ui-view'\n  const PAGE_LOAD_TRANSITION_SPEED = 250\n\n  class AjaxLoad {\n    constructor(element) {\n      this._element = element\n      const url = location.hash.replace(/^#/, '')\n      url !== '' ? this.setUpUrl(url) : setUpUrl(DEFAULT_PAGE)\n      this._addEventListeners()\n    }\n\n    // Getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    // Public\n\n    loadPage(url) {\n      $.ajax({\n        type : 'GET',\n        url : SUBPAGES_DIRECTORY + url,\n        dataType : 'html',\n        cache : false,\n        async: true,\n        beforeSend: function beforeSend() {\n          MAIN_CONTENT.css({\n            opacity: 0\n          })\n        },\n        success: function success() {\n          // eslint-disable-next-line no-undef\n          if (typeof Pace !== 'undefined') {\n            // eslint-disable-next-line no-undef\n            Pace.restart()\n          }\n          $('html, body').animate({\n            scrollTop: 0\n          }, 0)\n          MAIN_CONTENT.load(SUBPAGES_DIRECTORY + url, null, (response, status, xhr) => {\n            // console.log(response.getElementsByTagName(\"script\"))\n            window.location.hash = url\n          }).delay(PAGE_LOAD_TRANSITION_SPEED).animate({\n            opacity : 1\n          }, 0)\n        },\n        error: function error() {\n          window.location.href = PAGE_404\n        }\n      })\n    }\n\n    setUpUrl(url) {\n      $('nav .nav li .nav-link').removeClass('active')\n      $('nav .nav li.nav-dropdown').removeClass('open')\n      // eslint-disable-next-line prefer-template\n      $('nav .nav li:has(a[href=\"' + url.split('?')[0] + '\"])').addClass('open')\n      // eslint-disable-next-line prefer-template\n      $('nav .nav a[href=\"' + url.split('?')[0] + '\"]').addClass('active')\n\n      this.loadPage(url)\n    }\n\n    // Private\n\n    _addEventListeners() {\n      $(document).on('click', '.nav a[href!=\"#\"]', function (event) {\n        const thisNav = $(this).parent().parent()\n        if (thisNav.hasClass('nav-tabs') || thisNav.hasClass('nav-pills')) {\n          event.preventDefault()\n        } else if ($(this).attr('target') === '_top') {\n          event.preventDefault()\n          const target = $(event.currentTarget)\n          window.location = target.attr('href')\n        } else if ($(this).attr('target') === '_blank') {\n          event.preventDefault()\n          const target = $(event.currentTarget)\n          window.open(target.attr('href'))\n        } else {\n          event.preventDefault()\n          const target = $(event.currentTarget)\n          SetUpUrl(target.attr('href'))\n        }\n      })\n\n      $(document).on('click', 'a[href=\"#\"]', (event) => {\n        event.preventDefault()\n      })\n    }\n  }\n\n  return AjaxLoad\n})($)\n\nexport default AjaxLoad\n"],"file":"ajax-load.js"}